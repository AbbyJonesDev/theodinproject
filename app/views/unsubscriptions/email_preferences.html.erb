<div class="unsubscriptions-controller">
  <h1 class="text-center">Email Preferences</h1>
  <p>The Odin Project is all about learning to code with great resources
    and helpful peers to help along the way.
  </p>
  <br>
  <p>Sometimes we send emails to let you know about new opportunities or 
    resources that are available.  We hope those emails are helpful, but 
    you're welcome to opt out using the form below if you prefer.
  <p>
  <br>
  <p>(If you change your mind, just clear the checkbox and click "Update"
    to receive emails in that category again.)
  </p>
  <div class="email-categories">
    <p><strong>Categories:</strong></p>
    <br>
    <%= form_tag('/edit_subscriptions', method: 'post') do %>
      <% @categories.each do |c| %>
        <% if @currently_unsubscribed.include?(c.id) %>
          <div class="checkbox">
            <%= check_box_tag("categories[#{c.name}]", value="#{c.id}", true) %>
            <%= label_tag("#{c.name}:    #{c.description}") %>
          </div>
        <% else %> <!-- Box is unchecked -->
          <div class="checkbox">
            <%= check_box_tag("categories[#{c.name}]", value="#{c.id}", false) %>
            <%= label_tag("#{c.name}:    #{c.description}") %>
          </div>
        <% end %>
      <% end %>
      <!-- Unsubscribe All -->
      <% if current_user.unsubscribe_all? == false %>
        <div class="checkbox">
          <%= check_box_tag("categories[All]", value="All", false) %>
          <%= label_tag("All:    Unsubscribe from all categories") %>          
        </div>
      <% else %>
        <div class="checkbox">
          <%= check_box_tag("categories[All]", value="All", true) %>
          <%= label_tag("All:    Unsubscribe from all categories") %>          
        </div>
      <% end %>
      <br>
      <div>
        <%= submit_tag("Update") %>
      </div>
    <% end %>
  </div>
</div>